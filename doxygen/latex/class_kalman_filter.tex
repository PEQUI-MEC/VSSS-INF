\hypertarget{class_kalman_filter}{}\section{Kalman\+Filter Class Reference}
\label{class_kalman_filter}\index{Kalman\+Filter@{Kalman\+Filter}}


{\ttfamily \#include $<$kalman\+Filter.\+hpp$>$}



Collaboration diagram for Kalman\+Filter\+:
% FIG 0
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_kalman_filter_adcf29bef64e646e9cff6d15cb88b5896}{K\+F\+\_\+init} (cv\+::\+Point pos)
\item 
cv\+::\+Point \hyperlink{class_kalman_filter_adddba8eba0982a9042a9524adad3f8a7}{K\+F\+\_\+\+Prediction} (cv\+::\+Point pos)
\item 
\hyperlink{class_kalman_filter_aab2cc3677e9fcb19fff16b84c997f30a}{Kalman\+Filter} ()
\item 
\hyperlink{class_kalman_filter_af01e932cd20cec5dd06ca5d8f0b722f4}{$\sim$\+Kalman\+Filter} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
cv\+::\+Kalman\+Filter \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}
\item 
cv\+::\+Mat \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{K\+F\+\_\+state}
\item 
cv\+::\+Mat \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{K\+F\+\_\+meas}
\item 
bool \hyperlink{class_kalman_filter_a85ee09dd912c76ebcdbfa204153e28c1}{kf\+\_\+found}
\item 
double \hyperlink{class_kalman_filter_a9f9d6412ec56e87e78fe1de185bef4b8}{ticks}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 6 of file kalman\+Filter.\+hpp.



\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_kalman_filter_aab2cc3677e9fcb19fff16b84c997f30a}\label{class_kalman_filter_aab2cc3677e9fcb19fff16b84c997f30a}} 
\index{Kalman\+Filter@{Kalman\+Filter}!Kalman\+Filter@{Kalman\+Filter}}
\index{Kalman\+Filter@{Kalman\+Filter}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{Kalman\+Filter()}{KalmanFilter()}}
{\footnotesize\ttfamily Kalman\+Filter\+::\+Kalman\+Filter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 108 of file kalman\+Filter.\+cpp.


\begin{DoxyCode}
108 \{\}
\end{DoxyCode}
\mbox{\Hypertarget{class_kalman_filter_af01e932cd20cec5dd06ca5d8f0b722f4}\label{class_kalman_filter_af01e932cd20cec5dd06ca5d8f0b722f4}} 
\index{Kalman\+Filter@{Kalman\+Filter}!````~Kalman\+Filter@{$\sim$\+Kalman\+Filter}}
\index{````~Kalman\+Filter@{$\sim$\+Kalman\+Filter}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{$\sim$\+Kalman\+Filter()}{~KalmanFilter()}}
{\footnotesize\ttfamily Kalman\+Filter\+::$\sim$\+Kalman\+Filter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 110 of file kalman\+Filter.\+cpp.


\begin{DoxyCode}
110 \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{class_kalman_filter_adcf29bef64e646e9cff6d15cb88b5896}\label{class_kalman_filter_adcf29bef64e646e9cff6d15cb88b5896}} 
\index{Kalman\+Filter@{Kalman\+Filter}!K\+F\+\_\+init@{K\+F\+\_\+init}}
\index{K\+F\+\_\+init@{K\+F\+\_\+init}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{K\+F\+\_\+init()}{KF\_init()}}
{\footnotesize\ttfamily void Kalman\+Filter\+::\+K\+F\+\_\+init (\begin{DoxyParamCaption}\item[{cv\+::\+Point}]{pos }\end{DoxyParamCaption})}



Definition at line 3 of file kalman\+Filter.\+cpp.



References KF, K\+F\+\_\+meas, K\+F\+\_\+state, and ticks.


\begin{DoxyCode}
3                                       \{
4     \hyperlink{class_kalman_filter_a9f9d6412ec56e87e78fe1de185bef4b8}{ticks} = 0;
5     \textcolor{keywordtype}{int} stateSize = 6;
6     \textcolor{keywordtype}{int} measSize = 4;
7     \textcolor{keywordtype}{int} contrSize = 0;
8     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \hyperlink{classstd_1_1conditional_1_1type}{type} = CV\_32F;
9     cv::Mat stateAux(stateSize, 1, type);
10     cv::Mat measAux(measSize, 1, type);
11     \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state} = stateAux;  \textcolor{comment}{// [x,y,v\_x,v\_y,w,h]}
12     \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas} = measAux;    \textcolor{comment}{// [z\_x,z\_y,z\_w,z\_h]}
13     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.init(stateSize, measSize, contrSize, type);
14     \textcolor{comment}{/*//cv::Mat procNoise(stateSize, 1, type)}
15 \textcolor{comment}{    // [E\_x,E\_y,E\_v\_x,E\_v\_y,E\_w,E\_h]}
16 \textcolor{comment}{    // Transition State Matrix A}
17 \textcolor{comment}{    // Note: set dT at each processing step!}
18 \textcolor{comment}{    // [ 1 0 dT 0  0 0 ]}
19 \textcolor{comment}{    // [ 0 1 0  dT 0 0 ]}
20 \textcolor{comment}{    // [ 0 0 1  0  0 0 ]}
21 \textcolor{comment}{    // [ 0 0 0  1  0 0 ]}
22 \textcolor{comment}{    // [ 0 0 0  0  1 0 ]}
23 \textcolor{comment}{    // [ 0 0 0  0  0 1 ]*/}
24     cv::setIdentity(\hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.transitionMatrix);
25     \textcolor{comment}{/* // Measure Matrix H}
26 \textcolor{comment}{    // [ 1 0 0 0 0 0 ]}
27 \textcolor{comment}{    // [ 0 1 0 0 0 0 ]}
28 \textcolor{comment}{    // [ 0 0 0 0 1 0 ]}
29 \textcolor{comment}{    // [ 0 0 0 0 0 1 ]*/}
30     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.measurementMatrix = cv::Mat::zeros(measSize, stateSize, type);
31     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.measurementMatrix.at<\textcolor{keywordtype}{float}>(0) = 1.0f;
32     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.measurementMatrix.at<\textcolor{keywordtype}{float}>(7) = 1.0f;
33     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.measurementMatrix.at<\textcolor{keywordtype}{float}>(16) = 1.0f;
34     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.measurementMatrix.at<\textcolor{keywordtype}{float}>(23) = 1.0f;
35     \textcolor{comment}{/* // Process Noise Covariance Matrix Q}
36 \textcolor{comment}{    // [ Ex 0  0    0 0    0 ]}
37 \textcolor{comment}{    // [ 0  Ey 0    0 0    0 ]}
38 \textcolor{comment}{    // [ 0  0  Ev\_x 0 0    0 ]}
39 \textcolor{comment}{    // [ 0  0  0    1 Ev\_y 0 ]}
40 \textcolor{comment}{    // [ 0  0  0    0 1    Ew ]}
41 \textcolor{comment}{    // [ 0  0  0    0 0    Eh ]}
42 \textcolor{comment}{    //cv::setIdentity(kfBall.processNoiseCov, cv::Scalar(1e-2));}
43 \textcolor{comment}{    * */}
44     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.processNoiseCov.at<\textcolor{keywordtype}{float}>(0) = 1e-2;
45     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.processNoiseCov.at<\textcolor{keywordtype}{float}>(7) = 1e-2;
46     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.processNoiseCov.at<\textcolor{keywordtype}{float}>(14) = 2.0f;
47     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.processNoiseCov.at<\textcolor{keywordtype}{float}>(21) = 1.0f;
48     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.processNoiseCov.at<\textcolor{keywordtype}{float}>(28) = 1e-2;
49     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.processNoiseCov.at<\textcolor{keywordtype}{float}>(35) = 1e-2;
50     \textcolor{comment}{// Measures Noise Covariance Matrix R}
51     cv::setIdentity(\hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.measurementNoiseCov, cv::Scalar(1e-1));
52     \textcolor{comment}{//KF\_meas.at<float>(0) = pos.x;}
53     \textcolor{comment}{//KF\_meas.at<float>(1) = pos.y;}
54     \textcolor{comment}{//KF\_meas.at<float>(2) = (float) 5;}
55     \textcolor{comment}{//KF\_meas.at<float>(3) = (float) 5;}
56 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_kalman_filter_adddba8eba0982a9042a9524adad3f8a7}\label{class_kalman_filter_adddba8eba0982a9042a9524adad3f8a7}} 
\index{Kalman\+Filter@{Kalman\+Filter}!K\+F\+\_\+\+Prediction@{K\+F\+\_\+\+Prediction}}
\index{K\+F\+\_\+\+Prediction@{K\+F\+\_\+\+Prediction}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{K\+F\+\_\+\+Prediction()}{KF\_Prediction()}}
{\footnotesize\ttfamily cv\+::\+Point Kalman\+Filter\+::\+K\+F\+\_\+\+Prediction (\begin{DoxyParamCaption}\item[{cv\+::\+Point}]{pos }\end{DoxyParamCaption})}



Definition at line 58 of file kalman\+Filter.\+cpp.



References KF, kf\+\_\+found, K\+F\+\_\+meas, K\+F\+\_\+state, and ticks.


\begin{DoxyCode}
58                                                \{
59     \textcolor{comment}{//std::cout<<"KF1"<<std::endl;}
60     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.statePost = \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state};
61     \textcolor{comment}{//std::cout<<"KF1.1"<<std::endl;}
62     \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(0) = pos.x;
63     \textcolor{comment}{//std::cout<<"KF1.2"<<std::endl;}
64     \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(1) = pos.y;
65     \textcolor{comment}{//std::cout<<"KF1.3"<<std::endl;}
66     \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(2) = (\textcolor{keywordtype}{float}) 5;
67     \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(3) = (\textcolor{keywordtype}{float}) 5;
68     \textcolor{comment}{//std::cout<<"KF2"<<std::endl;}
69 
70     \textcolor{keywordflow}{if} (!\hyperlink{class_kalman_filter_a85ee09dd912c76ebcdbfa204153e28c1}{kf\_found}) \{ \textcolor{comment}{// First detection!}
71         \textcolor{comment}{//std::cout<<"KF3.1"<<std::endl;}
72         \textcolor{comment}{// >>>> Initialization}
73         \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.errorCovPre.at<\textcolor{keywordtype}{float}>(0) = 1; \textcolor{comment}{// px}
74         \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.errorCovPre.at<\textcolor{keywordtype}{float}>(7) = 1; \textcolor{comment}{// px}
75         \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.errorCovPre.at<\textcolor{keywordtype}{float}>(14) = 1;
76         \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.errorCovPre.at<\textcolor{keywordtype}{float}>(21) = 1;
77         \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.errorCovPre.at<\textcolor{keywordtype}{float}>(28) = 1; \textcolor{comment}{// px}
78         \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.errorCovPre.at<\textcolor{keywordtype}{float}>(35) = 1; \textcolor{comment}{// px}
79         \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state}.at<\textcolor{keywordtype}{float}>(0) = \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(0);
80         \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state}.at<\textcolor{keywordtype}{float}>(1) = \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(1);
81         \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state}.at<\textcolor{keywordtype}{float}>(2) = 0;
82         \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state}.at<\textcolor{keywordtype}{float}>(3) = 0;
83         \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state}.at<\textcolor{keywordtype}{float}>(4) = \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(2);
84         \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state}.at<\textcolor{keywordtype}{float}>(5) = \hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}.at<\textcolor{keywordtype}{float}>(3);
85         \textcolor{comment}{// <<<< Initialization}
86         \hyperlink{class_kalman_filter_a85ee09dd912c76ebcdbfa204153e28c1}{kf\_found} = \textcolor{keyword}{true};
87     \} \textcolor{keywordflow}{else} \{
88         \textcolor{comment}{//std::cout<<"KF3.2"<<std::endl;}
89         \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.correct(\hyperlink{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}{KF\_meas}); \textcolor{comment}{// Kalman Correction}
90     \}
91 
92     \textcolor{comment}{//std::cout<<"KF4"<<std::endl;}
93     \textcolor{keywordtype}{double} precTick = \hyperlink{class_kalman_filter_a9f9d6412ec56e87e78fe1de185bef4b8}{ticks};
94     \hyperlink{class_kalman_filter_a9f9d6412ec56e87e78fe1de185bef4b8}{ticks} = (double) cv::getTickCount();
95     \textcolor{keywordtype}{double} dT = (\hyperlink{class_kalman_filter_a9f9d6412ec56e87e78fe1de185bef4b8}{ticks} - precTick) / cv::getTickFrequency(); \textcolor{comment}{//seconds}
96     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.transitionMatrix.at<\textcolor{keywordtype}{float}>(2) = dT;
97     \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.transitionMatrix.at<\textcolor{keywordtype}{float}>(9) = dT;
98     \textcolor{comment}{//std::cout<<"KF5"<<std::endl;}
99     \hyperlink{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}{KF\_state} = \hyperlink{class_kalman_filter_a486d5802080222974f49454c59b71d83}{KF}.predict();
100     cv::Point center;
101     \textcolor{comment}{//std::cout<<"KF6"<<std::endl;}
102     center.x = KF\_state.at<\textcolor{keywordtype}{float}>(0);
103     center.y = KF\_state.at<\textcolor{keywordtype}{float}>(1);
104 
105     \textcolor{keywordflow}{return} center;
106 \}
\end{DoxyCode}


\subsection{Field Documentation}
\mbox{\Hypertarget{class_kalman_filter_a486d5802080222974f49454c59b71d83}\label{class_kalman_filter_a486d5802080222974f49454c59b71d83}} 
\index{Kalman\+Filter@{Kalman\+Filter}!KF@{KF}}
\index{KF@{KF}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{KF}{KF}}
{\footnotesize\ttfamily cv\+::\+Kalman\+Filter Kalman\+Filter\+::\+KF\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 7 of file kalman\+Filter.\+hpp.



Referenced by K\+F\+\_\+init(), and K\+F\+\_\+\+Prediction().

\mbox{\Hypertarget{class_kalman_filter_a85ee09dd912c76ebcdbfa204153e28c1}\label{class_kalman_filter_a85ee09dd912c76ebcdbfa204153e28c1}} 
\index{Kalman\+Filter@{Kalman\+Filter}!kf\+\_\+found@{kf\+\_\+found}}
\index{kf\+\_\+found@{kf\+\_\+found}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{kf\+\_\+found}{kf\_found}}
{\footnotesize\ttfamily bool Kalman\+Filter\+::kf\+\_\+found\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 10 of file kalman\+Filter.\+hpp.



Referenced by K\+F\+\_\+\+Prediction().

\mbox{\Hypertarget{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}\label{class_kalman_filter_ab8ea794012f17385fead830634b1c1ed}} 
\index{Kalman\+Filter@{Kalman\+Filter}!K\+F\+\_\+meas@{K\+F\+\_\+meas}}
\index{K\+F\+\_\+meas@{K\+F\+\_\+meas}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{K\+F\+\_\+meas}{KF\_meas}}
{\footnotesize\ttfamily cv\+::\+Mat Kalman\+Filter\+::\+K\+F\+\_\+meas\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 9 of file kalman\+Filter.\+hpp.



Referenced by K\+F\+\_\+init(), and K\+F\+\_\+\+Prediction().

\mbox{\Hypertarget{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}\label{class_kalman_filter_a279304db3b9574783b2724ab2ed989af}} 
\index{Kalman\+Filter@{Kalman\+Filter}!K\+F\+\_\+state@{K\+F\+\_\+state}}
\index{K\+F\+\_\+state@{K\+F\+\_\+state}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{K\+F\+\_\+state}{KF\_state}}
{\footnotesize\ttfamily cv\+::\+Mat Kalman\+Filter\+::\+K\+F\+\_\+state\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 8 of file kalman\+Filter.\+hpp.



Referenced by K\+F\+\_\+init(), and K\+F\+\_\+\+Prediction().

\mbox{\Hypertarget{class_kalman_filter_a9f9d6412ec56e87e78fe1de185bef4b8}\label{class_kalman_filter_a9f9d6412ec56e87e78fe1de185bef4b8}} 
\index{Kalman\+Filter@{Kalman\+Filter}!ticks@{ticks}}
\index{ticks@{ticks}!Kalman\+Filter@{Kalman\+Filter}}
\subsubsection{\texorpdfstring{ticks}{ticks}}
{\footnotesize\ttfamily double Kalman\+Filter\+::ticks\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 11 of file kalman\+Filter.\+hpp.



Referenced by K\+F\+\_\+init(), and K\+F\+\_\+\+Prediction().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
src/aux/\hyperlink{kalman_filter_8hpp}{kalman\+Filter.\+hpp}\item 
src/aux/\hyperlink{kalman_filter_8cpp}{kalman\+Filter.\+cpp}\end{DoxyCompactItemize}
